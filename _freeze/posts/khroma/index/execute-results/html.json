{
  "hash": "2af415a75d322b99d767247d433d6ff7",
  "result": {
    "markdown": "---\ntitle: \"`khroma` and `colorblindr`: Tools for colorblind-friendly plots\"\n\ndate: \"7/4/23\"\n\ncategories:\n  - visualization\n  - colors\n\ntoc: true\n\nfig-cap-location: top\n\n---\n<script src=\"/jquery-3.7.0.min.js\"></script>\n<script src=\"/fold.js\"></script>\n<script src=\"/move_session_info.js\"></script>\n\n\n\n\n\n\n\n\n\n\n\n<!-- begin content -->\n\n\n::: {.cell hash='index_cache/html/setup_cc312b8346f2b59542d7a9670dbdfc79'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Load packages\"}\nlibrary(dplyr)\nlibrary(ggplot2)\n```\n:::\n\n\n\n\n\n## `khroma` - colorblind-friendly palettes\n\n[`khroma`](https://packages.tesselle.org/khroma/) contains a number of color schemes that are colorblind-friendly, divided into diverging, qualitative, and sequential types:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-3_3adbc409cea67a29418254c965a838ae'}\n\n```{.r .cell-code}\nkhroma::info() |>\n  group_by(type) |>\n  summarize(palettes = paste(palette, collapse = \", \"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|type        |palettes                                                                                                                                                                                                                 |\n|:-----------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|diverging   |broc, cork, vik, lisbon, tofino, berlin, roma, bam, vanimo, oleron, bukavu, fes, sunset, BuRd, PRGn                                                                                                                      |\n|qualitative |bright, highcontrast, vibrant, muted, mediumcontrast, pale, dark, light, okabeito, okabeitoblack, stratigraphy, soil, land                                                                                               |\n|sequential  |devon, lajolla, bamako, davos, bilbao, nuuk, oslo, grayC, hawaii, lapaz, tokyo, buda, acton, turku, imola, batlow, batlowW, batlowK, brocO, corkO, vikO, romaO, bamO, YlOrBr, iridescent, discreterainbow, smoothrainbow |\n\n</div>\n:::\n:::\n\n\nThe `color` function takes a palette name and returns a function, which in turn returns a palette of specified size:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-4_7301990091cc19f8ec8c2d11685356a7'}\n\n```{.r .cell-code}\nlibrary(khroma)\n\nbright_fun <- color(\"bright\")\nbright_fun(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     blue       red     green    yellow      cyan \n\"#4477AA\" \"#EE6677\" \"#228833\" \"#CCBB44\" \"#66CCEE\" \nattr(,\"missing\")\n[1] NA\n```\n:::\n:::\n\nAnd you can preview these palettes with `plot_scheme()`:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-5_e4808e6352dca05b95092484d5bb5cc4'}\n\n```{.r .cell-code}\nplot_scheme(bright_fun(7), names = TRUE,\n            colours = TRUE) # NB: `colours` must be spelled British-ly\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nFurther, you can preview the palette as viewed by several types of colorblindness:\n\n\n::: {.cell .fold .o hash='index_cache/html/unnamed-chunk-6_dbbc5a8a1962cb1f784183a5b9d17278'}\n\n```{.r .cell-code}\nplot_scheme_colorblind(bright_fun(7))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n<br>\n\nEach of the schemes have built-in `ggplot` scales in the form `scale_color_{palettename}` and `scale_fill_{palettename}`:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-7_42c126d44a0cdf79ad438c0ae6ea766e'}\n\n```{.r .cell-code}\nplot <- midwest |> \n  filter(percbelowpoverty < 30) |> \n  ggplot(aes(x = percollege, y = percbelowpoverty, color = state)) +\n    geom_point(size = 3, alpha =.5) +\n    scale_color_bright()\n\nplot\n```\n\n::: {.cell-output-display}\n![Percent of population with a college degree vs. percent of population below the poverty line, by state.  Data from `ggplot2::midwest`](index_files/figure-html/unnamed-chunk-7-1.png){fig-alt='Percent of population with a college degree vs. percent of population below the poverty line, by state.  Data from `ggplot2::midwest`' width=672}\n:::\n:::\n\n(NB: you can use the _sequential_ and _diverging_ type palettes for discrete/categorical data if you add the argument `discrete = TRUE`)\n\n## `colorblindr` - Preview your plots with colorblind simulation\n\n`colorblindr::cvd_grid` will simulate how your plots will look to people with various types of colorblindness:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-8_8e48cc977eae229c38c426cda3c29f42'}\n\n```{.r .cell-code}\n# remotes::install_github(\"clauswilke/colorblindr\")\n\nplot <- msleep |> \n  filter(!is.na(vore)) |> \n  ggplot(aes(x = sleep_rem, fill = vore)) +\n  geom_density(alpha = 0.75) +\n  scale_fill_light()\n\nplot\n\ncolorblindr::cvd_grid(plot)\n```\n\n::: {.cell-output-display}\n![Density of hours of REM sleep, for carnivores, omnivores, herbivores, and insectivores.  Data from the mammal sleep dataset (`ggplot::msleep`).](index_files/figure-html/unnamed-chunk-8-1.png){width=960}\n:::\n\n::: {.cell-output-display}\n![The same plot in various simulations of colorblindness](index_files/figure-html/unnamed-chunk-8-2.png){width=960}\n:::\n:::\n\n\n\n\n<!-- End content -->\n\n\n<div id = \"footer-session-info\">\n<details>\n<summary>Session info and package versions</summary>\n::: {.cell hash='index_cache/html/unnamed-chunk-10_b5a09fb713ddf9d1d38bf5d33c2e104d'}\n::: {.cell-output .cell-output-stdout}\n```\n─ Session info ───────────────────────────────────────────────────────────────\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n setting  value\n version  R version 4.3.1 (2023-06-16)\n os       macOS Ventura 13.4.1\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       America/Chicago\n date     2023-07-06\n pandoc   3.1.1 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n─ Packages ───────────────────────────────────────────────────────────────────\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n           package loadedversion       date         source\n          asbutils    0.0.0.9001 2023-07-06          local\n               cli         3.6.1 2023-03-23 CRAN (R 4.3.0)\n         codetools        0.2-19 2023-02-01 CRAN (R 4.3.1)\n       colorblindr         0.1.0 2023-07-05         Github\n        colorspace         2.1-0 2023-01-23 CRAN (R 4.3.0)\n           cowplot         1.1.1 2020-12-30 CRAN (R 4.3.0)\n            crayon         1.5.2 2022-09-29 CRAN (R 4.3.0)\n              crul         1.4.0 2023-05-17 CRAN (R 4.3.0)\n              curl         5.0.1 2023-06-07 CRAN (R 4.3.0)\n            digest        0.6.31 2022-12-11 CRAN (R 4.3.0)\n             dplyr         1.1.2 2023-04-20 CRAN (R 4.3.0)\n          ellipsis         0.3.2 2021-04-29 CRAN (R 4.3.0)\n          evaluate          0.21 2023-05-05 CRAN (R 4.3.0)\n         extrafont          0.19 2023-01-18 CRAN (R 4.3.0)\n       extrafontdb           1.0 2012-06-11 CRAN (R 4.3.0)\n             fansi         1.0.4 2023-01-22 CRAN (R 4.3.0)\n            farver         2.1.1 2022-07-06 CRAN (R 4.3.0)\n           fastmap         1.1.1 2023-02-24 CRAN (R 4.3.0)\n fontBitstreamVera         0.1.1 2017-02-01 CRAN (R 4.3.0)\n    fontLiberation         0.1.0 2016-10-15 CRAN (R 4.3.0)\n        fontquiver         0.2.1 2017-02-01 CRAN (R 4.3.0)\n           gdtools         0.3.3 2023-03-27 CRAN (R 4.3.0)\n          generics         0.1.3 2022-07-05 CRAN (R 4.3.0)\n            gfonts         0.2.0 2023-01-08 CRAN (R 4.3.0)\n           ggplot2         3.4.2 2023-04-03 CRAN (R 4.3.0)\n              glue         1.6.2 2022-02-24 CRAN (R 4.3.0)\n            gtable         0.3.3 2023-03-21 CRAN (R 4.3.0)\n        hrbrthemes         0.8.0 2020-03-06 CRAN (R 4.3.0)\n         htmltools         0.5.5 2023-03-23 CRAN (R 4.3.0)\n       htmlwidgets         1.6.2 2023-03-17 CRAN (R 4.3.0)\n          httpcode         0.3.0 2020-04-10 CRAN (R 4.3.0)\n            httpuv        1.6.11 2023-05-11 CRAN (R 4.3.0)\n          jsonlite         1.8.4 2023-06-29 CRAN (R 4.3.0)\n            khroma        1.10.0 2023-04-17 CRAN (R 4.3.0)\n             knitr          1.43 2023-05-25 CRAN (R 4.3.0)\n          labeling         0.4.2 2020-10-20 CRAN (R 4.3.0)\n             later         1.3.1 2023-05-02 CRAN (R 4.3.0)\n         lifecycle         1.0.3 2022-10-07 CRAN (R 4.3.0)\n          magrittr         2.0.3 2022-03-30 CRAN (R 4.3.0)\n              mime          0.12 2021-09-28 CRAN (R 4.3.0)\n           munsell         0.5.0 2018-06-12 CRAN (R 4.3.0)\n            pillar         1.9.0 2023-03-22 CRAN (R 4.3.0)\n         pkgconfig         2.0.3 2019-09-22 CRAN (R 4.3.0)\n          promises       1.2.0.1 2021-02-11 CRAN (R 4.3.0)\n                R6         2.5.1 2021-08-19 CRAN (R 4.3.0)\n              Rcpp        1.0.10 2023-01-22 CRAN (R 4.3.0)\n              renv        0.17.3 2023-04-06 CRAN (R 4.3.0)\n             rlang         1.1.1 2023-04-28 CRAN (R 4.3.0)\n         rmarkdown          2.21 2023-06-01 CRAN (R 4.3.0)\n        rstudioapi          0.14 2022-08-22 CRAN (R 4.3.0)\n          Rttf2pt1        1.3.12 2023-01-22 CRAN (R 4.3.0)\n            scales         1.2.1 2022-08-20 CRAN (R 4.3.0)\n       sessioninfo         1.2.2 2021-12-06 CRAN (R 4.3.0)\n             shiny         1.7.4 2022-12-15 CRAN (R 4.3.0)\n       systemfonts         1.0.4 2022-02-11 CRAN (R 4.3.0)\n            tibble         3.2.1 2023-03-20 CRAN (R 4.3.0)\n        tidyselect         1.2.0 2022-10-10 CRAN (R 4.3.0)\n              utf8         1.2.3 2023-01-31 CRAN (R 4.3.0)\n             vctrs         0.6.3 2023-06-14 CRAN (R 4.3.0)\n             withr         2.5.0 2022-03-03 CRAN (R 4.3.0)\n              xfun          0.39 2023-04-20 CRAN (R 4.3.0)\n            xtable         1.8-4 2019-04-21 CRAN (R 4.3.0)\n              yaml         2.3.7 2023-01-23 CRAN (R 4.3.0)\n```\n:::\n:::\n</details>\n</div>\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/roboto-condensed-0.3.3/css/roboto-condensed.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}