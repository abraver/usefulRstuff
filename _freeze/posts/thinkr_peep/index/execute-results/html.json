{
  "hash": "2454884656dbed0db1fc6a2d7de8656e",
  "result": {
    "markdown": "---\ntitle: \"`thinkr::peep()`: See intermediate stages of piped dfs\"\n\ndate: \"6/1/23\"\n\ncategories:\n  - dataframes\n  - piping\n---\n<script src=\"/jquery-3.7.0.min.js\"></script>\n<script src=\"/fold.js\"></script>\n<script src=\"/move_session_info.js\"></script>\n\n\n\n\n\n\n\n\n\n\n\n<!-- begin content -->\n\n\n::: {.cell hash='index_cache/html/setup_73122296f41c7d9b946d97e5e7fc4f4a'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Setup\"}\nlibrary(tidyverse)\nlibrary(thinkr)\n```\n:::\n\n\nInsert `thinkr::peep(head)` into a `df` pipeline to print a few rows at a particular intermediate stage in the pipeline. Here it prints a few lines of the `df` before it gets summarized:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-2_dbf7fe24710b7544b20d38c058d195ad'}\n\n```{.r .cell-code}\npalmerpenguins::penguins |> \n  peep(head) |>\n  group_by(species) |>  # <1>\n  summarize(across(where(is.numeric), \\(x) mean(x, na.rm = TRUE)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n  <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n1 Adelie  Torgersen           39.1          18.7               181        3750\n2 Adelie  Torgersen           39.5          17.4               186        3800\n3 Adelie  Torgersen           40.3          18                 195        3250\n4 Adelie  Torgersen           NA            NA                  NA          NA\n5 Adelie  Torgersen           36.7          19.3               193        3450\n6 Adelie  Torgersen           39.3          20.6               190        3650\n# ℹ 2 more variables: sex <fct>, year <int>\n```\n:::\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|species   | bill_length_mm| bill_depth_mm| flipper_length_mm| body_mass_g|     year|\n|:---------|--------------:|-------------:|-----------------:|-----------:|--------:|\n|Adelie    |       38.79139|      18.34636|          189.9536|    3700.662| 2008.013|\n|Chinstrap |       48.83382|      18.42059|          195.8235|    3733.088| 2007.971|\n|Gentoo    |       47.50488|      14.98211|          217.1870|    5076.016| 2008.081|\n\n</div>\n:::\n:::\n\n\n1.  How convenient that the base R pipe looks like a penguin.\n\nYou can use multiple functions, like `head` and `tail` to see two views of the intermediate step; `verbose = TRUE` prints the functions used for these peeps:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-3_c77972840911b9cdb7e0f3570d5ce4dd'}\n\n```{.r .cell-code}\npalmerpenguins::penguins |>\n  peep(head, tail, verbose = TRUE) |> \n  group_by(species) |> \n  summarize(across(where(is.numeric), \\(x) mean(x, na.rm = TRUE)))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nhead(.)\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n  <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n1 Adelie  Torgersen           39.1          18.7               181        3750\n2 Adelie  Torgersen           39.5          17.4               186        3800\n3 Adelie  Torgersen           40.3          18                 195        3250\n4 Adelie  Torgersen           NA            NA                  NA          NA\n5 Adelie  Torgersen           36.7          19.3               193        3450\n6 Adelie  Torgersen           39.3          20.6               190        3650\n# ℹ 2 more variables: sex <fct>, year <int>\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\ntail(.)\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n  <fct>     <fct>           <dbl>         <dbl>             <int>       <int>\n1 Chinstrap Dream            45.7          17                 195        3650\n2 Chinstrap Dream            55.8          19.8               207        4000\n3 Chinstrap Dream            43.5          18.1               202        3400\n4 Chinstrap Dream            49.6          18.2               193        3775\n5 Chinstrap Dream            50.8          19                 210        4100\n6 Chinstrap Dream            50.2          18.7               198        3775\n# ℹ 2 more variables: sex <fct>, year <int>\n```\n:::\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|species   | bill_length_mm| bill_depth_mm| flipper_length_mm| body_mass_g|     year|\n|:---------|--------------:|-------------:|-----------------:|-----------:|--------:|\n|Adelie    |       38.79139|      18.34636|          189.9536|    3700.662| 2008.013|\n|Chinstrap |       48.83382|      18.42059|          195.8235|    3733.088| 2007.971|\n|Gentoo    |       47.50488|      14.98211|          217.1870|    5076.016| 2008.081|\n\n</div>\n:::\n:::\n\n\nAnd you can include arguments to functions inside `peep()` with dot syntax if you're using the `magrittr` pipe `%>%` (at least for the line directly above the `peep`):^[You can't use the base pipe's placeholder, `_`, here, since it does not work in nested functions.]\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-4_5516ed69206d6ef01bcda46443171b23'}\n\n```{.r .cell-code}\npalmerpenguins::penguins %>% \n  peep(head(n = 7, x = .)) |> \n  group_by(species) |> \n  summarize(across(where(is.numeric), \\(x) mean(x, na.rm = TRUE)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 7 × 8\n  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n  <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n1 Adelie  Torgersen           39.1          18.7               181        3750\n2 Adelie  Torgersen           39.5          17.4               186        3800\n3 Adelie  Torgersen           40.3          18                 195        3250\n4 Adelie  Torgersen           NA            NA                  NA          NA\n5 Adelie  Torgersen           36.7          19.3               193        3450\n6 Adelie  Torgersen           39.3          20.6               190        3650\n7 Adelie  Torgersen           38.9          17.8               181        3625\n# ℹ 2 more variables: sex <fct>, year <int>\n```\n:::\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|species   | bill_length_mm| bill_depth_mm| flipper_length_mm| body_mass_g|     year|\n|:---------|--------------:|-------------:|-----------------:|-----------:|--------:|\n|Adelie    |       38.79139|      18.34636|          189.9536|    3700.662| 2008.013|\n|Chinstrap |       48.83382|      18.42059|          195.8235|    3733.088| 2007.971|\n|Gentoo    |       47.50488|      14.98211|          217.1870|    5076.016| 2008.081|\n\n</div>\n:::\n:::\n\n\n<!-- End content -->\n\n\n<div id = \"footer-session-info\">\n<details>\n<summary>Session info and package versions</summary>\n::: {.cell hash='index_cache/html/unnamed-chunk-6_bfcf79e61653a815874581a08af012ba'}\n::: {.cell-output .cell-output-stdout}\n```\n─ Session info ───────────────────────────────────────────────────────────────\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n setting  value\n version  R version 4.3.1 (2023-06-16)\n os       macOS Ventura 13.4.1\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       America/Chicago\n date     2023-07-08\n pandoc   3.1.1 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n─ Packages ───────────────────────────────────────────────────────────────────\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n           package loadedversion       date         source\n           askpass           1.1 2019-01-13 CRAN (R 4.3.0)\n        assertthat         0.2.1 2019-03-21 CRAN (R 4.3.0)\n            cachem         1.0.8 2023-05-01 CRAN (R 4.3.0)\n             callr         3.7.3 2022-11-02 CRAN (R 4.3.0)\n               cli         3.6.1 2023-03-23 CRAN (R 4.3.0)\n         codetools        0.2-19 2023-02-01 CRAN (R 4.3.1)\n        colorspace         2.1-0 2023-01-23 CRAN (R 4.3.0)\n            crayon         1.5.2 2022-09-29 CRAN (R 4.3.0)\n              crul           1.3 2022-09-03 CRAN (R 4.3.1)\n              curl         5.0.0 2023-01-12 CRAN (R 4.3.0)\n          devtools         2.4.5 2022-10-11 CRAN (R 4.3.0)\n            digest        0.6.31 2022-12-11 CRAN (R 4.3.0)\n             dplyr         1.1.2 2023-04-20 CRAN (R 4.3.0)\n          ellipsis         0.3.2 2021-04-29 CRAN (R 4.3.0)\n          evaluate          0.21 2023-05-05 CRAN (R 4.3.0)\n             fansi         1.0.4 2023-01-22 CRAN (R 4.3.0)\n           fastmap         1.1.1 2023-02-24 CRAN (R 4.3.0)\n fontBitstreamVera         0.1.1 2017-02-01 CRAN (R 4.3.0)\n    fontLiberation         0.1.0 2016-10-15 CRAN (R 4.3.0)\n        fontquiver         0.2.1 2017-02-01 CRAN (R 4.3.0)\n           forcats         1.0.0 2023-01-29 CRAN (R 4.3.0)\n                fs         1.6.2 2023-04-25 CRAN (R 4.3.0)\n           gdtools         0.3.3 2023-03-27 CRAN (R 4.3.0)\n          generics         0.1.3 2022-07-05 CRAN (R 4.3.0)\n            gfonts         0.2.0 2023-01-08 CRAN (R 4.3.0)\n           ggplot2         3.4.2 2023-04-03 CRAN (R 4.3.0)\n              glue         1.6.2 2022-02-24 CRAN (R 4.3.0)\n            gtable         0.3.3 2023-03-21 CRAN (R 4.3.0)\n               hms         1.1.3 2023-03-21 CRAN (R 4.3.0)\n         htmltools         0.5.5 2023-03-23 CRAN (R 4.3.0)\n       htmlwidgets         1.6.2 2023-03-17 CRAN (R 4.3.0)\n          httpcode         0.3.0 2020-04-10 CRAN (R 4.3.0)\n            httpuv        1.6.11 2023-05-11 CRAN (R 4.3.0)\n          jsonlite         1.8.4 2022-12-06 CRAN (R 4.3.0)\n             knitr          1.43 2023-05-25 CRAN (R 4.3.0)\n             later         1.3.1 2023-05-02 CRAN (R 4.3.0)\n          lazyeval         0.2.2 2019-03-15 CRAN (R 4.3.0)\n         lifecycle         1.0.3 2022-10-07 CRAN (R 4.3.0)\n         lubridate         1.9.2 2023-02-10 CRAN (R 4.3.0)\n          magrittr         2.0.3 2022-03-30 CRAN (R 4.3.0)\n           memoise         2.0.1 2021-11-26 CRAN (R 4.3.0)\n              mime          0.12 2021-09-28 CRAN (R 4.3.0)\n            miniUI       0.1.1.1 2018-05-18 CRAN (R 4.3.0)\n           munsell         0.5.0 2018-06-12 CRAN (R 4.3.0)\n           officer         0.6.2 2023-03-28 CRAN (R 4.3.0)\n           openssl         2.0.6 2023-03-09 CRAN (R 4.3.0)\n    palmerpenguins         0.1.1 2022-08-15 CRAN (R 4.3.0)\n            pillar         1.9.0 2023-03-22 CRAN (R 4.3.0)\n          pkgbuild         1.4.0 2022-11-27 CRAN (R 4.3.1)\n         pkgconfig         2.0.3 2019-09-22 CRAN (R 4.3.0)\n           pkgload         1.3.2 2022-11-16 CRAN (R 4.3.0)\n       prettyunits         1.1.1 2020-01-24 CRAN (R 4.3.0)\n          processx         3.8.1 2023-04-18 CRAN (R 4.3.0)\n           profvis         0.3.7 2020-11-02 CRAN (R 4.3.1)\n          promises       1.2.0.1 2021-02-11 CRAN (R 4.3.0)\n                ps         1.7.5 2023-04-18 CRAN (R 4.3.0)\n             purrr         1.0.1 2023-01-10 CRAN (R 4.3.0)\n                R6         2.5.1 2021-08-19 CRAN (R 4.3.0)\n              ragg         1.2.5 2023-01-12 CRAN (R 4.3.0)\n              Rcpp        1.0.10 2023-01-22 CRAN (R 4.3.0)\n             readr         2.1.4 2023-02-10 CRAN (R 4.3.0)\n           remotes         2.4.2 2021-11-30 CRAN (R 4.3.0)\n              renv        0.17.3 2023-04-06 CRAN (R 4.3.0)\n             rlang         1.1.1 2023-04-28 CRAN (R 4.3.0)\n         rmarkdown          2.21 2023-03-26 CRAN (R 4.3.0)\n        rstudioapi          0.14 2022-08-22 CRAN (R 4.3.0)\n               rvg         0.3.2 2023-01-07 CRAN (R 4.3.0)\n            scales         1.2.1 2022-08-20 CRAN (R 4.3.0)\n       sessioninfo         1.2.2 2021-12-06 CRAN (R 4.3.0)\n             shiny         1.7.4 2022-12-15 CRAN (R 4.3.0)\n           stringi        1.7.12 2023-01-11 CRAN (R 4.3.0)\n           stringr         1.5.0 2022-12-02 CRAN (R 4.3.0)\n       systemfonts         1.0.4 2022-02-11 CRAN (R 4.3.0)\n       textshaping         0.3.6 2021-10-13 CRAN (R 4.3.0)\n            thinkr          0.16 2022-08-22 CRAN (R 4.3.0)\n            tibble         3.2.1 2023-03-20 CRAN (R 4.3.0)\n             tidyr         1.3.0 2023-01-24 CRAN (R 4.3.0)\n        tidyselect         1.2.0 2022-10-10 CRAN (R 4.3.0)\n         tidyverse         2.0.0 2023-02-22 CRAN (R 4.3.0)\n        timechange         0.2.0 2023-01-11 CRAN (R 4.3.0)\n              tzdb         0.3.0 2022-03-28 CRAN (R 4.3.0)\n        urlchecker         1.0.1 2021-11-30 CRAN (R 4.3.0)\n           usethis         2.1.6 2022-05-25 CRAN (R 4.3.1)\n              utf8         1.2.3 2023-01-31 CRAN (R 4.3.0)\n              uuid         1.1-0 2022-04-19 CRAN (R 4.3.0)\n             vctrs         0.6.2 2023-04-19 CRAN (R 4.3.0)\n             withr         2.5.0 2022-03-03 CRAN (R 4.3.0)\n              xfun          0.39 2023-04-20 CRAN (R 4.3.0)\n              xml2         1.3.4 2023-04-27 CRAN (R 4.3.0)\n            xtable         1.8-4 2019-04-21 CRAN (R 4.3.0)\n              yaml         2.3.7 2023-01-23 CRAN (R 4.3.0)\n               zip         2.3.0 2023-04-17 CRAN (R 4.3.0)\n```\n:::\n:::\n</details>\n</div>\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/roboto-condensed-0.3.3/css/roboto-condensed.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}