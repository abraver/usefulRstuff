{
  "hash": "63fac22f401bc861b373576708926185",
  "result": {
    "markdown": "---\ntitle: \"Upgrading R without losing all your packages\"\n\ndate: \"6/30/23\"\n\ncategories:\n  - upgrading\n  - package management\n---\n<script src=\"/jquery-3.7.0.min.js\"></script>\n<script src=\"/fold.js\"></script>\n<script src=\"/move_session_info.js\"></script>\n\n\n\n\n\n\n\n\n\n\n\n<!-- begin content -->\n\nIf you upgrade R to a new major or minor release (e.g. 4.0 or 4.1, but not 4.1.1), your library of installed packages doesn't come along for the ride.\n\n## Before you upgrade\n\n*Before* you upgrade, you should make a list of all of your installed packages---this is easy with `sessioninfo::package_info(\"installed\")`. If you've got packages installed from multiple sources (like CRAN and also Github), it's best to save these as separate lists to facilitate automated reinstallation of these grouped by source:\n\n\n::: {.cell messages='false' hash='index_cache/html/unnamed-chunk-2_fadae0ccd48b4d71a521e30a2eace8dc'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n# Figure out what's installed\ninstalled_packages <- sessioninfo::package_info(\"installed\") |> \n  mutate(\"where_from\" = dplyr::case_when(\n    str_detect(source, \"CRAN\") ~ \"CRAN\",\n    str_detect(source, \"Github\") ~ \"Github\",\n    .default = \"other\" # catch any packages from other sources;\n                       # not automatically installed below\n    )\n  ) |> \n  nest(.by = where_from)\n\n# Where to write the lists of packages.  Change as needed\nfile_location <- fs::path(\"~/Desktop/tmp/\")\n\n# Write these lists to disk\ninstalled_packages %>% \n  pwalk(function(where_from, data) {\n    write_csv(data,\n              file = fs::path(file_location,\n                              paste0(where_from, \"_packages\"),\n                              ext = \"csv\"))\n  })\n```\n:::\n\n\n\n## After you upgrade \n\nThen, after you upgrade R, you can re-install the packages from these lists:\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-3_6bc8088647c912836deab03c6182fd9d'}\n\n```{.r .cell-code}\n# Install manually some things we'll need since they won't be installed anymore\ninstall.packages(c(\"remotes\", \"dplyr\", \"stringr\"))\n\nfile_location <- \"~/Desktop/tmp/\" # Change as needed\n\n# Install CRAN packages\nCRAN_packages <- read.csv(paste0(file_location, \"CRAN_packages\", \".csv\"))\nremotes::install_cran(CRAN_packages$package)\n\n# Install Github packages\ngithub_packages <- read.csv(paste0(file_location, \"Github_packages\", \".csv\")) |>\n  dplyr::mutate(github_source = stringr::str_extract(source,\n      \"(?<=Github \\\\().*(?=@)\")) # Get the username and repo name\nremotes::install_github(github_packages$github_source)\n```\n:::\n\nNB: If you have locally installed packages, or packages from another source, these aren't automatically reinstalled with the code above, but are listed in `other_packages.csv`.\n\n<!-- End content -->\n\n\n\n<div id = \"footer-session-info\">\n<details>\n<summary>Session info and package versions</summary>\n::: {.cell hash='index_cache/html/unnamed-chunk-5_21b31f662589a1115e67bd4254f280f5'}\n::: {.cell-output .cell-output-stdout}\n```\n─ Session info ───────────────────────────────────────────────────────────────\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n setting  value\n version  R version 4.3.1 (2023-06-16)\n os       macOS Ventura 13.4.1\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       America/Chicago\n date     2023-07-08\n pandoc   3.1.1 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n─ Packages ───────────────────────────────────────────────────────────────────\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n           package loadedversion       date         source\n               bit         4.0.5 2022-11-15 CRAN (R 4.3.0)\n             bit64         4.0.5 2020-08-30 CRAN (R 4.3.0)\n               cli         3.6.1 2023-03-23 CRAN (R 4.3.0)\n         codetools        0.2-19 2023-02-01 CRAN (R 4.3.1)\n        colorspace         2.1-0 2023-01-23 CRAN (R 4.3.0)\n            crayon         1.5.2 2022-09-29 CRAN (R 4.3.0)\n              crul         1.4.0 2023-05-17 CRAN (R 4.3.0)\n              curl         5.0.1 2023-06-07 CRAN (R 4.3.0)\n            digest        0.6.31 2022-12-11 CRAN (R 4.3.0)\n             dplyr         1.1.2 2023-04-20 CRAN (R 4.3.0)\n          ellipsis         0.3.2 2021-04-29 CRAN (R 4.3.0)\n          evaluate          0.21 2023-05-05 CRAN (R 4.3.0)\n             fansi         1.0.4 2023-01-22 CRAN (R 4.3.0)\n           fastmap         1.1.1 2023-02-24 CRAN (R 4.3.0)\n fontBitstreamVera         0.1.1 2017-02-01 CRAN (R 4.3.0)\n    fontLiberation         0.1.0 2016-10-15 CRAN (R 4.3.0)\n        fontquiver         0.2.1 2017-02-01 CRAN (R 4.3.0)\n           forcats         1.0.0 2023-01-29 CRAN (R 4.3.0)\n                fs         1.6.2 2023-04-25 CRAN (R 4.3.0)\n           gdtools         0.3.3 2023-03-27 CRAN (R 4.3.0)\n          generics         0.1.3 2022-07-05 CRAN (R 4.3.0)\n            gfonts         0.2.0 2023-01-08 CRAN (R 4.3.0)\n           ggplot2         3.4.2 2023-04-03 CRAN (R 4.3.0)\n              glue         1.6.2 2022-02-24 CRAN (R 4.3.0)\n            gtable         0.3.3 2023-03-21 CRAN (R 4.3.0)\n               hms         1.1.3 2023-03-21 CRAN (R 4.3.0)\n         htmltools         0.5.5 2023-03-23 CRAN (R 4.3.0)\n       htmlwidgets         1.6.2 2023-03-17 CRAN (R 4.3.0)\n          httpcode         0.3.0 2020-04-10 CRAN (R 4.3.0)\n            httpuv        1.6.11 2023-05-11 CRAN (R 4.3.0)\n          jsonlite         1.8.7 2023-06-29 CRAN (R 4.3.0)\n             knitr          1.43 2023-05-25 CRAN (R 4.3.0)\n             later         1.3.1 2023-05-02 CRAN (R 4.3.0)\n         lifecycle         1.0.3 2022-10-07 CRAN (R 4.3.0)\n         lubridate         1.9.2 2023-02-10 CRAN (R 4.3.0)\n          magrittr         2.0.3 2022-03-30 CRAN (R 4.3.0)\n              mime          0.12 2021-09-28 CRAN (R 4.3.0)\n           munsell         0.5.0 2018-06-12 CRAN (R 4.3.0)\n            pillar         1.9.0 2023-03-22 CRAN (R 4.3.0)\n         pkgconfig         2.0.3 2019-09-22 CRAN (R 4.3.0)\n          promises       1.2.0.1 2021-02-11 CRAN (R 4.3.0)\n             purrr         1.0.1 2023-01-10 CRAN (R 4.3.0)\n                R6         2.5.1 2021-08-19 CRAN (R 4.3.0)\n              ragg         1.2.5 2023-01-12 CRAN (R 4.3.0)\n              Rcpp        1.0.10 2023-01-22 CRAN (R 4.3.0)\n             readr         2.1.4 2023-02-10 CRAN (R 4.3.0)\n              renv        0.17.3 2023-04-06 CRAN (R 4.3.0)\n             rlang         1.1.1 2023-04-28 CRAN (R 4.3.0)\n         rmarkdown          2.22 2023-06-01 CRAN (R 4.3.0)\n        rstudioapi          0.14 2022-08-22 CRAN (R 4.3.0)\n            scales         1.2.1 2022-08-20 CRAN (R 4.3.0)\n       sessioninfo         1.2.2 2021-12-06 CRAN (R 4.3.0)\n             shiny         1.7.4 2022-12-15 CRAN (R 4.3.0)\n           stringi        1.7.12 2023-01-11 CRAN (R 4.3.0)\n           stringr         1.5.0 2022-12-02 CRAN (R 4.3.0)\n       systemfonts         1.0.4 2022-02-11 CRAN (R 4.3.0)\n       textshaping         0.3.6 2021-10-13 CRAN (R 4.3.0)\n            tibble         3.2.1 2023-03-20 CRAN (R 4.3.0)\n             tidyr         1.3.0 2023-01-24 CRAN (R 4.3.0)\n        tidyselect         1.2.0 2022-10-10 CRAN (R 4.3.0)\n         tidyverse         2.0.0 2023-02-22 CRAN (R 4.3.0)\n        timechange         0.2.0 2023-01-11 CRAN (R 4.3.0)\n              tzdb         0.4.0 2023-05-12 CRAN (R 4.3.0)\n              utf8         1.2.3 2023-01-31 CRAN (R 4.3.0)\n             vctrs         0.6.3 2023-06-14 CRAN (R 4.3.0)\n             vroom         1.6.3 2023-04-28 CRAN (R 4.3.0)\n             withr         2.5.0 2022-03-03 CRAN (R 4.3.0)\n              xfun          0.39 2023-04-20 CRAN (R 4.3.0)\n            xtable         1.8-4 2019-04-21 CRAN (R 4.3.0)\n              yaml         2.3.7 2023-01-23 CRAN (R 4.3.0)\n```\n:::\n:::\n</details>\n</div>\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/roboto-condensed-0.3.3/css/roboto-condensed.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}